window.__require=function t(i,n,e){function c(s,h){if(!n[s]){if(!i[s]){var a=s.split("/");if(a=a[a.length-1],!i[a]){var r="function"==typeof __require&&__require;if(!h&&r)return r(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}}var d=n[s]={exports:{}};i[s][0].call(d.exports,function(t){return c(i[s][1][t]||t)},d,d.exports,t,i,n,e)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<e.length;s++)c(e[s]);return c}({MacMain:[function(t,i,n){"use strict";cc._RF.push(i,"2cbdeB5zF1Id7CKHnMDKAbR","MacMain"),cc.Class({extends:cc.Component,properties:{canvas:cc.Node,firstLand:cc.Node,hero:cc.Node,againButton:cc.Node,maxWidth:300,minWidth:20,stickWidth:6,stickSpeed:400,heroMoveSpeed:400,moveDuration:.5,scoreLabel:cc.Label,highestScore:cc.Label,vitoryAudio:{default:null,type:cc.AudioClip},growAudio:{default:null,type:cc.AudioClip},scoreAudio:{default:null,type:cc.AudioClip},kickAudio:{default:null,type:cc.AudioClip},fallAudio:{default:null,type:cc.AudioClip},deathAudio:{default:null,type:cc.AudioClip},buttonAudio:{default:null,type:cc.AudioClip}},onLoad:function(){var t=this;this.stick=null,this.stickLengthen=!1,this.canStartTouch=!0,this.runLength=0,this.score=0,this.createSecondLand(),this.getLandRange(),this.secondLand.setPosition(cc.v2(this.firstLand.width+this.currentLandRange,0)),this.registerEvent(),this.hero.getComponent(cc.Animation).on("stop",function(i,n){"heroTick"===n.name&&t.stickFall()})},registerEvent:function(){this.canvas.on(cc.Node.EventType.TOUCH_START,this.touchStart.bind(this),this.node),this.canvas.on(cc.Node.EventType.TOUCH_END,this.touchEnd.bind(this),this.node),this.canvas.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd.bind(this),this.node)},touchStart:function(){this.canStartTouch&&(this.stick=this.createStick(),this.stick.parent=this.node,this.stick.x=this.hero.getPosition().x+this.hero.width*(1-this.hero.anchorX)+this.stickWidth*this.stick.anchorX,this.stickLengthen=!0,this.hero.getComponent(cc.Animation).play("heroPush"),cc.audioEngine.playEffect(this.growAudio,!1))},touchEnd:function(){this.canStartTouch&&(this.stickLengthen=!1,this.canStartTouch=!1,this.hero.getComponent(cc.Animation).play("heroTick"),cc.audioEngine.playEffect(this.kickAudio,!1))},stickFall:function(){var t=this,i=cc.rotateTo(1,90);i.easing(cc.easeIn(3));var n=cc.callFunc(function(){cc.audioEngine.playEffect(t.fallAudio,!1);var i=t.stick.height-t.stick.width*t.stick.anchorX;i<t.currentLandRange||i>t.currentLandRange+t.secondLand.width?t.heroMoveToStickEnd():(t.heroMoveToLand(),t.score++,t.scoreLabel.string=t.score)}),e=cc.sequence(i,n);this.stick.runAction(e)},heroMoveToStickEnd:function(){var t=this,i=this.hero.getComponent(cc.Animation),n=cc.callFunc(function(){i.stop("heroRun"),t.heroAndStickDown()});i.play("heroRun"),this.heroMove(this.stick.height,n)},heroAndStickDown:function(){var t=this,i=cc.rotateTo(1,180);i.easing(cc.easeIn(3)),this.stick.runAction(i);var n=cc.moveBy(.5,cc.v2(0,-300-this.hero.height));n.easing(cc.easeIn(3));var e=cc.callFunc(function(){t.gameOver()}),c=cc.sequence(n,e);this.hero.runAction(c),cc.audioEngine.playEffect(this.deathAudio,!1)},heroMoveToLand:function(){var t=this,i=this.hero.getComponent(cc.Animation),n=cc.callFunc(function(){i.stop("heroRun"),cc.audioEngine.playEffect(t.vitoryAudio,!1),t.landMove()});i.play("heroRun"),this.heroMove(this.currentLandRange+this.secondLand.width,n)},heroMove:function(t,i){var n=t/this.heroMoveSpeed,e=cc.moveBy(n,cc.v2(t,0));if(i){var c=cc.sequence(e,i);this.hero.runAction(c)}else this.hero.runAction(e)},landMove:function(){var t=this,i=cc.winSize.width,n=this.currentLandRange+this.secondLand.width;this.runLength+=n;var e=cc.moveBy(this.moveDuration,cc.v2(-n,0));this.node.runAction(e),this.firstLand=this.secondLand,this.createSecondLand(),this.getLandRange(),this.secondLand.setPosition(this.runLength+i,0);var c=i-this.currentLandRange-100,o=cc.moveBy(this.moveDuration,cc.v2(-c,0)),s=cc.callFunc(function(){t.canStartTouch=!0}),h=cc.sequence(o,s);this.secondLand.runAction(h)},createSecondLand:function(){this.secondLand=this.createNewLand(),this.secondLand.parent=this.node},createNewLand:function(){var t=this,i=new cc.Node("Land");i.anchorX=0,i.anchorY=0;var n=i.addComponent(cc.Sprite);return n.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.color=cc.Color.BLACK,i.height=300,i.width=this.getRandomWidth(this.maxWidth,this.minWidth),this.spriteFrameCache?n.spriteFrame=this.spriteFrameCache:cc.loader.loadRes("blank",cc.SpriteFrame,function(i,e){n.spriteFrame=e,t.spriteFrameCache=e}),i},createStick:function(){var t=new cc.Node("stick");t.anchorY=0,t.y=300;var i=t.addComponent(cc.Sprite);return i.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.spriteFrame=this.spriteFrameCache,t.color=cc.Color.BLACK,t.width=this.stickWidth,t.height=0,t},gameOver:function(){this.againButton.on(cc.Node.EventType.TOUCH_END,function(){cc.director.loadScene("MacGame")});var t=cc.sys.localStorage.getItem("highScore")||0;+t<this.score&&(t=this.score),cc.sys.localStorage.setItem("highScore",t),this.highestScore.string="\u6700\u9ad8\u5206\uff1a"+t,this.againButton.parent.active=!0},start:function(){},getLandRange:function(){var t=cc.winSize.width;return this.currentLandRange=this.getRandomWidth(20,t-100-this.secondLand.width-20),this.currentLandRange},getRandomWidth:function(t,i){return Math.random()*(t-i)+i},update:function(t){this.stickLengthen&&(this.stick.height+=t*this.stickSpeed)}}),cc._RF.pop()},{}],Main:[function(t,i,n){"use strict";cc._RF.push(i,"697bbkG1nhGcYmea7yAoBRm","Main"),cc.Class({extends:cc.Component,properties:{canvas:cc.Node,firstLand:cc.Node,hero:cc.Node,maxWidth:300,minWidth:20,stickWidth:6,stickSpeed:400,heroMoveSpeed:400,moveDuration:.5},onLoad:function(){var t=this;this.stick=null,this.stickLengthen=!1,this.runLength=0,this.createSecondLand(),this.getLandRange(),this.secondLand.setPosition(cc.v2(this.firstLand.width+this.currentLandRange,0)),this.registerEvent(),this.hero.getComponent(cc.Animation).on("stop",function(i,n){"heroTick"===n.name&&t.stickFall()})},registerEvent:function(){this.canvas.on(cc.Node.EventType.TOUCH_START,this.touchStart.bind(this),this.node),this.canvas.on(cc.Node.EventType.TOUCH_END,this.touchEnd.bind(this),this.node),this.canvas.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd.bind(this),this.node)},touchStart:function(){this.stick=this.createStick(),this.stick.parent=this.node,this.stick.x=this.hero.getPosition().x+this.hero.width*(1-this.hero.anchorX)+this.stickWidth*this.stick.anchorX,this.stickLengthen=!0,this.hero.getComponent(cc.Animation).play("heroPush")},touchEnd:function(){this.stickLengthen=!1,this.hero.getComponent(cc.Animation).play("heroTick")},stickFall:function(){var t=this,i=cc.rotateTo(1,270,0);i.easing(cc.easeIn(3));var n=cc.callFunc(function(){var i=t.stick.height-t.stick.width*t.stick.anchorX;i<t.currentLandRange||i>t.currentLandRange+t.secondLand.width?t.heroMoveToStickEnd():t.heroMoveToLand()}),e=cc.sequence(i,n);this.stick.runAction(e)},heroMoveToStickEnd:function(){var t=this,i=this.hero.getComponent(cc.Animation),n=cc.callFunc(function(){i.stop("heroRun"),t.heroAndStickDown()});i.play("heroRun"),this.heroMove(this.stick.height,n)},heroAndStickDown:function(){var t=this,i=cc.rotateTo(1,180,0);i.easing(cc.easeIn(3)),this.stick.runAction(i);var n=cc.moveBy(.5,cc.v2(0,-300-this.hero.height));n.easing(cc.easeIn(3));var e=cc.callFunc(function(){t.gameOver()}),c=cc.sequence(n,e);this.hero.runAction(c)},heroMoveToLand:function(){var t=this,i=this.hero.getComponent(cc.Animation),n=cc.callFunc(function(){i.stop("heroRun"),t.landMove()});i.play("heroRun"),this.heroMove(this.currentLandRange+this.secondLand.width,n)},heroMove:function(t,i){var n=t/this.heroMoveSpeed,e=cc.moveBy(n,cc.v2(t,0));if(i){var c=cc.sequence(e,i);this.hero.runAction(c)}else this.hero.runAction(e)},landMove:function(){var t=cc.winSize.width,i=this.currentLandRange+this.secondLand.width;this.runLength+=i;var n=cc.moveBy(this.moveDuration,cc.v2(-i,0));this.node.runAction(n),this.firstLand=this.secondLand,this.createSecondLand(),this.getLandRange(),this.secondLand.setPosition(this.runLength+t,0);var e=t-this.currentLandRange-100,c=cc.moveBy(this.moveDuration,cc.v2(-e,0));this.secondLand.runAction(c)},createSecondLand:function(){this.secondLand=this.createNewLand(),this.secondLand.parent=this.node},createNewLand:function(){var t=this,i=new cc.Node("Land");i.anchorX=0,i.anchorY=0;var n=i.addComponent(cc.Sprite);return n.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.color=cc.Color.BLACK,i.height=300,i.width=this.getRandomWidth(this.maxWidth,this.minWidth),this.spriteFrameCache?n.spriteFrame=this.spriteFrameCache:cc.loader.loadRes("blank",cc.SpriteFrame,function(i,e){n.spriteFrame=e,t.spriteFrameCache=e}),i},createStick:function(){var t=new cc.Node("stick");t.anchorY=0,t.y=300;var i=t.addComponent(cc.Sprite);return i.sizeMode=cc.Sprite.SizeMode.CUSTOM,i.spriteFrame=this.spriteFrameCache,t.color=cc.Color.BLACK,t.width=this.stickWidth,t.height=0,t},gameOver:function(){cc.director.loadScene("Game")},start:function(){},getLandRange:function(){var t=cc.winSize.width;return this.currentLandRange=this.getRandomWidth(20,t-100-this.secondLand.width-20),this.currentLandRange},getRandomWidth:function(t,i){return Math.random()*(t-i)+i},update:function(t){this.stickLengthen&&(this.stick.height+=t*this.stickSpeed)}}),cc._RF.pop()},{}],game:[function(t,i,n){"use strict";cc._RF.push(i,"c787b18D5VEbbEIQgRb49+T","game"),cc.Class({extends:cc.Component,properties:{landPrefab:{default:null,type:cc.Prefab},heroPrefab:{default:null,type:cc.Prefab},stickPrefab:{default:null,type:cc.Prefab},maxWidth:0,minWidth:0},onLoad:function(){this.addLand(),this.addHero(),this.rotateAction=null,this.setStick()},addLand:function(){if(!this.land1){this.land1=cc.instantiate(this.landPrefab),this.node.addChild(this.land1),this.land1.width=this.randomWidth(this.maxWidth,this.minWidth);var t=this.transformOriginPoints(this.land1.width,this.land1.height);this.land1.setPosition(cc.v2(t.x,t.y))}this.land2=cc.instantiate(this.landPrefab),this.node.addChild(this.land2),this.land2.width=this.randomWidth(this.maxWidth,this.minWidth);var i=this.reTransformOriginPoints(this.land1.getPosition().x).x;this.gapLength=this.randomWidth(this.node.width-i-this.land2.width,10);var n=this.transformOriginPoints(this.node.width-i-this.gapLength+this.land2.width,this.land2.height);this.land2.setPosition(cc.v2(n.x,n.y))},addHero:function(){this.hero=cc.instantiate(this.heroPrefab),this.node.addChild(this.hero);this.transformOriginPoints(this.land1.width,this.land1.height);this.hero.setPosition(this.land1.getPosition())},setStick:function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){t.rotateAction||(t.stick=cc.instantiate(t.stickPrefab),t.node.addChild(t.stick),t.stick.width=5,t.stick.height=0,t.stick.setPosition(t.land1.getPosition()),t.hasTouch=!0)}),this.node.on(cc.Node.EventType.TOUCH_END,function(){t.hasTouch=!1,t.rotateAction=cc.rotateTo(1,270,0),t.stick.runAction(t.rotateAction)})},randomWidth:function(t,i){return Math.random()*(t-i)+i},transformOriginPoints:function(t,i){return{x:t-this.node.width/2,y:i-this.node.height/2}},reTransformOriginPoints:function(t,i){return{x:t+this.node.width/2,y:i+this.node.height/2}},start:function(){},update:function(t){this.hasTouch&&this.stick&&(this.stick.height+=2),this.rotateAction&&this.rotateAction.isDone()&&(this.rotateAction=null)}}),cc._RF.pop()},{}],hero:[function(t,i,n){"use strict";cc._RF.push(i,"f13e292RF5KFrsLdYc4rt8D","hero"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],land:[function(t,i,n){"use strict";cc._RF.push(i,"8e0d6iSF3NEh5DtgKvnHj6b","land"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],stick:[function(t,i,n){"use strict";cc._RF.push(i,"9196cuI1VFIOaQQGzJibDPa","stick"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["MacMain","Main","game","hero","land","stick"]);